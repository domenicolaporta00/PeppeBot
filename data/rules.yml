version: "3.1"

rules:

- rule: Saluta sempre quando l'utente saluta
  steps:
  - intent: greet
  - action: utter_greet

- rule: Rispondi sempre alla richiesta di aiuto (Help)
  steps:
  - intent: help
  - action: utter_help

- rule: Rispondi alle domande sull'identità e creatori
  steps:
  - intent: ask_identity
  - action: utter_identity

- rule: Racconta la storia di GreenMarket
  steps:
  - intent: ask_greenmarket_story
  - action: utter_greenmarket_story

- rule: Mostra le ricette migliori (Top Rated)
  steps:
  - intent: ask_top_rated
  - action: action_show_top_rated

- rule: Cerca ricetta per nome
  steps:
  - intent: search_by_name
  - action: action_search_by_name

- rule: Seleziona ricetta per ID (click bottone)
  steps:
  - intent: select_recipe
  - action: action_select_recipe_by_id

- rule: Cerca per categoria
  steps:
  - intent: search_by_category
  - action: action_search_by_category

- rule: Chiedi nutrizione
  steps:
  - intent: ask_nutrition
  - action: action_ask_nutrition

- rule: Chiedi tempo cottura
  steps:
  - intent: ask_cooking_time
  - action: action_ask_cooking_time

- rule: Cerca per ingredienti
  steps:
  - intent: search_by_ingredient
  - action: action_search_by_ingredient

- rule: Attiva Svuota Frigo Form
  steps:
  - intent: trigger_svuota_frigo
  - action: svuota_frigo_form
  - active_loop: svuota_frigo_form

- rule: Invia Svuota Frigo Form
  condition:
  - active_loop: svuota_frigo_form
  steps:
  - action: svuota_frigo_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_submit_svuota_frigo

- rule: Stop Svuota Frigo Form
  condition:
  - active_loop: svuota_frigo_form
  steps:
  - intent: stop
  - action: action_deactivate_loop
  - active_loop: null
  - action: utter_form_stopped
  - action: action_reset_svuota_frigo_form

- rule: Activate Nutrition Form
  steps:
  - intent: trigger_nutrition_search
  - action: nutrition_search_form
  - active_loop: nutrition_search_form

- rule: Submit Nutrition Form
  condition:
  - active_loop: nutrition_search_form
  steps:
  - action: nutrition_search_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_submit_nutrition_search

- rule: Stop Nutrition Form
  condition:
  - active_loop: nutrition_search_form
  steps:
  - intent: stop
  - action: action_deactivate_loop
  - active_loop: null
  - action: utter_form_stopped
  - action: action_reset_nutrition_search_form

- rule: Activate Full Meal Form
  steps:
  - intent: trigger_full_meal
  - action: full_meal_form
  - active_loop: full_meal_form

- rule: Submit Full Meal Form
  condition:
  - active_loop: full_meal_form
  steps:
  - action: full_meal_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_submit_full_meal

- rule: Stop Full Meal Form
  condition:
  - active_loop: full_meal_form
  steps:
  - intent: stop
  - action: action_deactivate_loop
  - active_loop: null
  - action: utter_form_stopped
  - action: action_reset_full_meal_form

- rule: Rispondi con una ricetta casuale
  steps:
  - intent: random_recipe
  - action: action_random_recipe

- rule: Rispondi con l'easter egg del bot inutile
  steps:
  - intent: easter_egg_bot_inutile
  - action: utter_easter_egg_bot_inutile

- rule: Rispondi con l'easter egg della pizza con l'ananas
  steps:
  - intent: easter_egg_ananas_pizza
  - action: utter_easter_egg_ananas_pizza

- rule: Say goodbye anytime the user says goodbye
  steps:
  - intent: goodbye
  - action: utter_goodbye

- rule: Rispondi con Fallback se la confidenza è bassa
  steps:
  - intent: nlu_fallback
  - action: utter_fallback
